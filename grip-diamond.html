<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>The GRIP Diamond | Caugia Consulting</title>
  <meta name="description" content="Interactive GTM model. Visualize your system balance and see how the four dimensions affect growth." />

  <link rel="icon" href="assets/C-logo.png" type="image/png" />
  
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Merriweather:wght@400;700;900&display=swap" rel="stylesheet" />

  <style>
    /* ================= CAUGIA CORE V3 ================= */
    :root{
      --primary:#0056b3;
      --primary-dark:#003370; /* Darker for hover states */
      --text-dark:#0f172a;
      --text-body:#475569;
      --bg:#f8fafc;
      --white:#ffffff;
      --line:#e2e8f0;
      
      --radius-lg:24px; /* Slightly rounder for modern feel */
      --radius-md:16px;
      --shadow-soft:0 12px 36px -8px rgba(0,0,0,0.05), 0 4px 12px -4px rgba(0,0,0,0.03);
      --max:1500px; /* Wider canvas */

      /* Status Colors */
      --good-bg: #f0fdf4; --good-border: #bbf7d0; --good-text: #15803d;
      --warn-bg: #fffbeb; --warn-border: #fde68a; --warn-text: #b45309;
      --bad-bg: #fef2f2;  --bad-border: #fecaca;  --bad-text: #b91c1c;
    }

    /* --- SAAS LOCK: Prevent Global Scroll on Desktop --- */
    html, body {
      height: 100vh; width: 100vw;
      margin: 0; padding: 0;
      overflow: hidden; /* The "Lock" */
      background: var(--bg);
      font-family: Inter, sans-serif;
      color: var(--text-dark);
      display: flex; flex-direction: column;
      -webkit-font-smoothing: antialiased;
    }

    *, *::before, *::after { box-sizing: border-box; }

    h1,h2,h3,h4 {
      font-family: Merriweather, serif; color: var(--text-dark); font-weight: 900; letter-spacing: -0.02em;
    }

    /* ================= HEADER (Index Style) ================= */
    header {
      flex: 0 0 80px; /* Fixed height */
      background: rgba(255,255,255,0.96); backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(15,23,42,0.05);
      z-index: 100; width: 100%;
    }
    .nav-container {
      height: 100%; max-width: var(--max); margin: 0 auto; padding: 0 32px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .brand { display: flex; align-items: center; gap: 12px; font-weight: 900; letter-spacing: 0.02em; text-decoration: none; color: var(--text-dark); font-size: 1.05rem; }
    .brand img { width: 32px; height: 32px; }

    .nav-links { display: flex; gap: 32px; align-items: center; list-style: none; margin: 0; padding: 0; }
    .nav-links a { color: var(--text-body); font-weight: 600; font-size: 0.95rem; text-decoration: none; transition: color 0.2s ease; }
    .nav-links a:hover, .nav-links a.active { color: var(--primary); }

    .btn-contact {
      background: var(--primary-dark); color: var(--white); padding: 12px 28px;
      border-radius: 99px; font-weight: 700; font-size: 0.95rem;
      text-decoration: none; transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(0, 51, 112, 0.15);
    }
    .btn-contact:hover { background: #002655; transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0, 51, 112, 0.25); }


    /* ================= MAIN DASHBOARD LAYOUT ================= */
    .dashboard-wrap {
      flex: 1; /* Fills remaining space */
      width: 100%; max-width: var(--max);
      margin: 0 auto; padding: 32px;
      display: grid;
      grid-template-columns: 340px 1fr; /* Left Controls | Right Visuals */
      gap: 32px;
      overflow: hidden; /* Contains internal scrolls */
    }

    /* --- COMMON CARD STYLES --- */
    .glass-card {
      background: var(--white); border-radius: var(--radius-lg);
      border: 1px solid var(--line); box-shadow: var(--shadow-soft);
      padding: 32px;
    }

    /* ================= LEFT PANEL: CONTROLS ================= */
    .controls-panel {
      display: flex; flex-direction: column; height: 100%;
      overflow-y: auto; /* Internal scroll if needed */
      padding-right: 4px;
    }
    /* Subtle Scrollbar */
    .controls-panel::-webkit-scrollbar { width: 4px; }
    .controls-panel::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

    .panel-header { margin-bottom: 32px; padding-bottom: 20px; border-bottom: 1px solid var(--line); }
    .panel-header h2 { font-size: 1.4rem; margin-bottom: 8px; }
    .panel-header p { font-size: 0.9rem; color: var(--text-body); margin: 0; line-height: 1.5; }

    .control-group { margin-bottom: 32px; }
    .control-label { display: flex; justify-content: space-between; align-items:center; font-weight: 700; font-size: 0.95rem; margin-bottom: 12px; color: var(--text-dark); }
    .control-label .val { font-variant-numeric: tabular-nums; color: var(--primary); font-size: 1.1rem; }

    /* Slider Styling */
    input[type=range]{ width:100%; -webkit-appearance:none; height:8px; background:#e2e8f0; border-radius:10px; outline:none; cursor: pointer; }
    input[type=range]::-webkit-slider-thumb{ -webkit-appearance:none; width:24px; height:24px; background:var(--white); border-radius:50%; border:4px solid var(--primary); box-shadow:0 4px 10px rgba(0,0,0,0.1); transition: transform 0.1s ease; margin-top:-8px; }
    input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.1); }
    input[type=range]::-webkit-slider-runnable-track { height:8px; border-radius:10px; background: linear-gradient(to right, var(--primary) 0%, var(--line) 0%); /* JS updates gradient */ }


    /* ================= RIGHT PANEL: VISUALS (THE STABLE GRID) ================= */
    .visual-grid {
      display: grid; 
      grid-template-columns: 1.3fr 1fr; /* Diamond Col | Insights Col */
      gap: 32px;
      height: 100%; overflow: hidden;
    }

    /* --- THE ICONIC DIAMOND --- */
    .diamond-container {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      position: relative; height: 100%;
    }
    
    .diamond-header-row {
      position: absolute; top: 32px; left: 32px; right: 32px;
      display: flex; justify-content: space-between; align-items: center;
      border-bottom: 1px solid var(--line); padding-bottom: 16px;
    }
    .diamond-title { font-size: 1.1rem; font-weight: 900; color: var(--text-dark); font-family: Merriweather, serif; }
    .total-score-box { font-weight: 800; color: var(--primary-dark); font-size: 1.1rem; }
    .total-score-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-body); margin-right: 8px; }

    .diamond-wrapper { 
      width: 100%; max-width: 480px; aspect-ratio: 1/1; position: relative; margin-top: 40px;
    }
    #gripDiamondSVG { width: 100%; height: 100%; overflow: visible; }

    /* Diamond Nodes (Anchors) */
    .diamond-node {
      position: absolute; width: 48px; height: 48px; 
      background: #fff; border: 3px solid var(--primary); border-radius: 50%;
      color: var(--primary-dark); font-family: Merriweather, serif; font-weight: 900; font-size: 1.1rem;
      display: flex; align-items: center; justify-content: center; 
      box-shadow: 0 8px 24px rgba(0, 86, 179, 0.2); z-index: 10;
    }
    .top { top: -4%; left: 50%; transform: translate(-50%, -50%); }
    .bottom { bottom: -4%; left: 50%; transform: translate(-50%, 50%); }
    .left { top: 50%; left: -4%; transform: translate(-50%, -50%); }
    .right { top: 50%; right: -4%; transform: translate(50%, -50%); }


    /* --- INSIGHTS COLUMN (The Stable Stack) --- */
    .insights-stack {
      display: flex; flex-direction: column; gap: 24px;
      height: 100%; /* Occupy full height */
      overflow-y: auto; padding-right: 4px; /* Internal scroll if really needed on short screens */
    }
    .insights-stack::-webkit-scrollbar { width: 4px; }

    /* 1. Health Check (Fixed height content) */
    .health-card { flex: 0 0 auto; /* Don't shrink or grow */ }
    .health-table { display: grid; gap: 14px; margin-top: 16px; }
    
    /* HEALTH GRID FIX: WIDER COLUMNS */
    .health-row {
      display: grid; 
      /* Label (Flex) | Score (Wider fixed) | Badge (Fixed centered) */
      grid-template-columns: 1fr 85px 110px; 
      gap: 16px; /* More gap */
      align-items: center; padding-bottom: 14px; border-bottom: 1px solid var(--line);
    }
    .health-row:last-child { border: 0; padding: 0; }

    .h-label { font-weight: 700; color: var(--text-dark); font-size: 0.95rem; }
    .h-score { font-weight: 700; color: var(--text-body); font-size: 0.95rem; text-align: right; font-variant-numeric: tabular-nums; }
    .status-badge { 
      font-size: 0.7rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em; 
      padding: 6px 0; border-radius: 8px; text-align: center; display: block;
    }

    /* 2. Archetype (Fixed height content) */
    .archetype-card { 
      flex: 0 0 auto; /* Don't shrink or grow */
      padding: 24px; border: 2px solid transparent; transition: all 0.3s ease; 
    }
    .label-xs { font-size: 0.75rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.1em; display: block; margin-bottom: 8px; opacity: 0.7; }
    .insight-h { font-size: 1.2rem; font-weight: 900; font-family: Merriweather, serif; margin-bottom: 8px; color: var(--text-dark); }
    .insight-p { font-size: 0.95rem; color: var(--text-body); line-height: 1.5; margin: 0; }

    /* 3. Summary (The FILLER) */
    .summary-card {
      flex: 1 1 auto; /* Grow to fill space, but allow shrinking if absolutely necessary */
      display: flex; flex-direction: column;
      min-height: 200px; /* Ensure it never collapses too small */
    }
    .summary-title { font-size: 0.95rem; font-weight: 800; color: var(--text-dark); text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 2px solid var(--line); padding-bottom: 12px; margin-bottom: 16px; display: inline-block; }
    /* Ensure text doesn't overflow the flex container */
    .summary-content-wrap { flex: 1; overflow-y: auto; /* Scroll text *inside* the box if needed */ }
    .summary-text { font-size: 1rem; line-height: 1.7; color: var(--text-body); }

    /* --- MOBILE RESPONSIVENESS --- */
    @media (max-width: 1100px) {
      html, body { height: auto; overflow-y: auto; } /* Unlock window scroll */
      .dashboard-wrap { display: flex; flex-direction: column; padding: 24px; gap: 48px; }
      .controls-panel { height: auto; overflow: visible; }
      .visual-grid { grid-template-columns: 1fr; height: auto; gap: 48px; }
      .diamond-container { min-height: 500px; padding: 60px 24px 40px; }
      .diamond-wrapper { max-width: 400px; margin-top: 20px; }
      .insights-stack { height: auto; overflow: visible; }
      .summary-card { min-height: auto; flex: 0 0 auto; } /* Don't need to fill height on mobile */
      .nav-links { display: none; } /* Simplify header for now */
    }
  </style>
</head>

<body>

<header>
  <div class="nav-container">
    <a href="index.html" class="brand">
      <img src="assets/C-logo.png" alt="Caugia Logo">
      <span>CAUGIA CONSULTING</span>
    </a>
    
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="services.html">Services</a></li>
      <li><a href="gtm-assessment.html">GTM Score</a></li>
      <li><a href="resources.html" class="active">Resources</a></li>
    </ul>

    <a href="contact.html" class="btn-contact">Contact</a>
  </div>
</header>

<main class="dashboard-wrap">
  
  <aside class="glass-card controls-panel">
    <div class="panel-header">
      <h2>Dimensions</h2>
      <p>Adjust the sliders to simulate your current GTM state and see the system impact.</p>
    </div>

    <div class="control-group">
      <div class="control-label"><span>Guidance</span><span class="val" id="val-g">45</span></div>
      <input type="range" id="input-g" min="0" max="100" value="45">
    </div>

    <div class="control-group">
      <div class="control-label"><span>Resources</span><span class="val" id="val-r">48</span></div>
      <input type="range" id="input-r" min="0" max="100" value="48">
    </div>

    <div class="control-group">
      <div class="control-label"><span>Implementation</span><span class="val" id="val-i">85</span></div>
      <input type="range" id="input-i" min="0" max="100" value="85">
    </div>

    <div class="control-group">
      <div class="control-label"><span>Performance</span><span class="val" id="val-p">43</span></div>
      <input type="range" id="input-p" min="0" max="100" value="43">
    </div>

    <div style="margin-top: auto; padding-top: 32px; border-top: 1px solid var(--line);">
      <p style="font-weight: 700; color:var(--text-dark); margin-bottom:16px;">Want to know your real numbers?</p>
      <a href="gtm-assessment.html" style="display:block; text-align:center; padding:14px; border-radius:12px; background:var(--primary); color:white; font-weight:700; text-decoration:none; transition:0.2s; box-shadow: 0 4px 12px rgba(0, 86, 179, 0.2);">Take the Free Assessment</a>
    </div>
  </aside>

  <div class="visual-grid">
    
    <div class="glass-card diamond-container">
      <div class="diamond-header-row">
        <span class="diamond-title">The System Shape</span>
        <div><span class="total-score-label">Total Score:</span><span id="totalScore" class="total-score-box">55</span></div>
      </div>

      <div class="diamond-wrapper">
        <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" aria-hidden="true">
          <defs>
            <linearGradient id="diamondGrad" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color:rgba(0, 86, 179, 0.4)" />
              <stop offset="100%" style="stop-color:rgba(0, 86, 179, 0.05)" />
            </linearGradient>
            <filter id="subtleGlow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur in="SourceGraphic" stdDeviation="4" result="blur" />
              <feColorMatrix in="blur" type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
              <feComposite in="SourceGraphic" in2="goo" operator="atop"/>
            </filter>
          </defs>
        </svg>

        <svg id="gripDiamondSVG" viewBox="0 0 260 260"></svg>
        
        <div class="diamond-node top">G</div>
        <div class="diamond-node right">I</div>
        <div class="diamond-node bottom">P</div>
        <div class="diamond-node left">R</div>
      </div>
    </div>

    <div class="insights-stack">
      
      <div class="glass-card health-card">
        <h2 style="font-size:1.2rem; margin:0 0 20px 0;">Health Check</h2>
        <div class="health-table">
          <div class="health-row">
            <span class="h-label">Guidance</span>
            <span class="h-score" id="score-g">45/100</span>
            <span class="status-badge badge-bad" id="badge-g">CRITICAL</span>
          </div>
          <div class="health-row">
            <span class="h-label">Resources</span>
            <span class="h-score" id="score-r">48/100</span>
            <span class="status-badge badge-bad" id="badge-r">CRITICAL</span>
          </div>
          <div class="health-row">
            <span class="h-label">Implementation</span>
            <span class="h-score" id="score-i">85/100</span>
            <span class="status-badge badge-good" id="badge-i">STRONG</span>
          </div>
          <div class="health-row">
            <span class="h-label">Performance</span>
            <span class="h-score" id="score-p">43/100</span>
            <span class="status-badge badge-bad" id="badge-p">CRITICAL</span>
          </div>
        </div>
      </div>

      <div class="glass-card archetype-card mode-warn" id="archetypeBox">
        <span class="label-xs">System Pattern</span>
        <div class="insight-h" id="archetypeTitle">The Direction Gap</div>
        <div class="insight-p" id="archetypeBody">
          Execution capability exists, but the strategic compass is broken. Teams are misaligned.
        </div>
      </div>

      <div class="glass-card summary-card">
        <div class="summary-title">Executive Summary</div>
        <div class="summary-content-wrap">
            <div class="summary-text" id="execSummary">
            Loading summary...
            </div>
        </div>
      </div>

    </div>
  </div>

</main>


<script>
  (function() {
    // Helper: Status & Color
    function getStatus(val) {
      if (val < 50) return { label: "CRITICAL", class: "badge-bad", color: "#b91c1c" };
      if (val < 70) return { label: "DEVELOPING", class: "badge-warn", color: "#b45309" };
      return { label: "STRONG", class: "badge-good", color: "#15803d" };
    }

    // Helper: Update Slider Track Gradient
    function updateSliderTrack(sliderId, val) {
      const slider = document.getElementById(sliderId);
      const percent = ((val - slider.min) / (slider.max - slider.min)) * 100;
      slider.style.background = `linear-gradient(to right, var(--primary) ${percent}%, var(--line) ${percent}%)`;
    }

    // --- 30 ARCHETYPES & SUMMARIES LOGIC ---
    function getArchetype(g, r, i, p) {
      const scores = [{ k: 'g', v: g }, { k: 'r', v: r }, { k: 'i', v: i }, { k: 'p', v: p }];
      scores.sort((a, b) => a.v - b.v);
      
      const avg = Math.round((g+r+i+p)/4);
      const lowest = scores[0];
      const secondLowest = scores[1];
      const highest = scores[3];

      // 1. EXTREMES
      if (avg < 35) return { 
        title: "The Stalled Engine", 
        body: "Systemic failure across all dimensions. Foundational rebuild required.", 
        summary: "The revenue engine has stalled. There is no single constraint to fix; the entire system requires a reset. Focus on finding product-market fit with a handful of customers before scaling any commercial functions.",
        mode: "mode-bad" 
      };

      if (avg < 45 && highest.v < 60) return { 
        title: "The Fragile Foundation", 
        body: "No dimension is strong enough to carry the others. Risk of total deceleration.", 
        summary: "The system is fragile. Without a clear strength to lean on, every new initiative feels heavy. Stop adding new channels or hires. Focus purely on stabilizing one core motion (likely outbound or founder-led) to build a baseline.",
        mode: "mode-bad" 
      };

      if (avg > 85) return { 
        title: "The Precision Machine", 
        body: "Elite performance. Focus on incremental optimization and expansion.", 
        summary: "Your GTM engine is operating at elite levels. The risk now is complexity and complacency. Focus on marginal gains: optimization of pricing, expansion of adjacent ICPs, and defending your brand category.",
        mode: "mode-good" 
      };

      if (avg > 75 && lowest.v > 65) return { 
        title: "The Balanced Engine", 
        body: "Strong coherence. No major drag factors, allowing for predictable scaling.", 
        summary: "You have achieved system balance. There are no critical bottlenecks holding you back. You can now safely pour fuel on the fire (budget/headcount) because the conversion mechanics are sound.",
        mode: "mode-good" 
      };

      // 2. CONSTRAINTS (LOWEST DIMENSION)
      // === LOWEST: GUIDANCE (Strategy Gap) ===
      if (lowest.k === 'g') {
         if (highest.k === 'i' && highest.v > 65) return { 
           title: "The Activity Trap", 
           body: "High execution, low direction. Running fast in the wrong direction.", 
           summary: "The team is working incredibly hard (High Implementation) but lacks strategic clarity. You are burning cash on activities that don't compound. Stop execution for one week to clarify ICP and positioning.",
           mode: "mode-warn" 
         };
         if (highest.k === 'r' && highest.v > 65) return { 
           title: "The Bloated Ship", 
           body: "Heavy on resources, light on strategy. High burn, low focus.", 
           summary: "You have hired people and bought tools (High Resources) before defining exactly where to go. This creates a high-burn, low-velocity environment. Freeze hiring and audit your tool stack immediately.",
           mode: "mode-warn" 
         };
         if (secondLowest.k === 'p') return { 
           title: "The Guesswork Strategy", 
           body: "No direction and no data to prove it. Decisions are anecdotal.", 
           summary: "You are flying blind. Without Strategy (G) or Data (P), every decision is a guess. You cannot optimize this system yet; you must first instrument it to see what is happening.",
           mode: "mode-bad" 
         };
         return { 
           title: "The Direction Gap", 
           body: "Execution exists, but the compass is broken. Teams are misaligned.", 
           summary: "Your primary constraint is Guidance. The team is capable of doing the work, but they are constantly realigning because the goalposts keep moving. Lock down your 12-month strategy before launching next quarter's plans.",
           mode: "mode-warn" 
         };
      }

      // === LOWEST: RESOURCES (Capacity Gap) ===
      if (lowest.k === 'r') {
         if (highest.k === 'g' && highest.v > 70) return { 
           title: "The Visionary Void", 
           body: "Great strategy, no capacity to execute. A roadmap to nowhere.", 
           summary: "Leadership has a clear vision (High Guidance), but the team is too small or underfunded to build it. You are at risk of losing morale as targets are missed despite good intentions. Prioritize: do fewer things or secure more budget.",
           mode: "mode-warn" 
         };
         if (highest.k === 'i' && highest.v > 70) return { 
           title: "The Burnout Engine", 
           body: "High execution on low resources. The team is over-performing but fragile.", 
           summary: "Your team is performing heroics. They are executing well (High Implementation) despite a lack of support/tools. This is a burnout risk. Invest in automation or headcount immediately to sustain this pace.",
           mode: "mode-bad" 
         };
         if (secondLowest.k === 'p') return { 
           title: "The Tooling Debt", 
           body: "Lack of resources is causing a data blackout. You can't fix what you can't measure.", 
           summary: "You are underinvested in RevOps and Data. You cannot see why performance is low because you lack the tooling to track it. Your first hire should be RevOps, not Sales.",
           mode: "mode-bad" 
         };
         return { 
           title: "The Capacity Crunch", 
           body: "Ambition exceeds bandwidth. The engine is undersized.", 
           summary: "The math doesn't work. Your revenue goals require more capacity (leads, hours, budget) than you have available. Reset expectations or unlock resources to bridge the gap.",
           mode: "mode-warn" 
         };
      }

      // === LOWEST: IMPLEMENTATION (Execution Gap) ===
      if (lowest.k === 'i') {
         if (highest.k === 'g' && highest.v > 70) return { 
           title: "The Ivory Tower", 
           body: "Strategy is perfect, but reality breaks down. Disconnect between plan and field.", 
           summary: "There is a gap between the boardroom and the front line. The strategy looks good on paper (High Guidance), but it isn't landing in the market. Leadership needs to get involved in deal execution to see the friction.",
           mode: "mode-bad" 
         };
         if (highest.k === 'p' && highest.v > 60) return { 
           title: "The Heroic System", 
           body: "Results happen despite process, not because of it. Individual reliance.", 
           summary: "You are hitting targets (High Performance) but it's pure hustle. There is no repeatable process (Low Implementation). If your top rep leaves, revenue collapses. Document the playbook now while things are going well.",
           mode: "mode-warn" 
         };
         if (secondLowest.k === 'r') return { 
           title: "The Process Void", 
           body: "No process and limited resources. Efficiency is impossible.", 
           summary: "It is chaotic. You lack the people to do the work and the process to guide them. Don't hire more salespeople yet; hire a GTM manager to build the tracks first.",
           mode: "mode-bad" 
         };
         return { 
           title: "The Broken Handoff", 
           body: "Friction in the motion. Leads and data dropping between silos.", 
           summary: "Your funnel is leaking at the handoffs. Marketing to Sales, or Sales to CS. The individual teams are fine, but the connection is broken. Focus on SLA's and full-funnel definitions.",
           mode: "mode-warn" 
         };
      }

      // === LOWEST: PERFORMANCE (Outcome Gap) ===
      if (lowest.k === 'p') {
         if (highest.k === 'i' && highest.v > 70) return { 
           title: "The Leaky Bucket", 
           body: "High effort, low outcome. Conversion or retention is draining value.", 
           summary: "You are doing the work (High Implementation) but not getting the reward. Something is broken in conversion or retention. Stop pouring more leads into the top until you fix the leak in the middle.",
           mode: "mode-bad" 
         };
         if (highest.k === 'g' && highest.v > 70) return { 
           title: "The Blind Optimist", 
           body: "Strong narrative, weak validation. The market isn't buying the story.", 
           summary: "You believe in the vision (High Guidance), but the market disagrees. Win rates and retention are too low. It's time to validate product-market fit again. Is the value proposition actually landing?",
           mode: "mode-warn" 
         };
         if (highest.k === 'r' && highest.v > 70) return { 
           title: "The ROI Drag", 
           body: "Heavy investment yielding low returns. Inefficient engine.", 
           summary: "This is an efficiency crisis. You have the budget and people (High Resources), but the output per head is far below benchmark. Review team structure and channel ROI immediately.",
           mode: "mode-bad" 
         };
         return { 
           title: "The Black Box", 
           body: "The system runs, but visibility is zero. Unpredictable future.", 
           summary: "Performance is the constraint because you can't predict it. Revenue comes in spikes. You need to install a forecasting cadence and weekly metric reviews to regain control.",
           mode: "mode-mid" 
         };
      }

      // Fallback
      return { 
        title: "The Developing Engine", 
        body: "System shows potential but lacks coherence.", 
        summary: "Your GTM engine is maturing but still disjointed. Focus on connecting the four pillars: ensure Strategy informs Resources, Resources enable Implementation, and Implementation drives Performance.",
        mode: "mode-mid" 
      };
    }

    // --- DRAW THE ICONIC DIAMOND ---
    function drawDiamond(g, r, i, p) {
      const svg = document.getElementById("gripDiamondSVG");
      const cx = 130; const cy = 130; const maxR = 90;
      
      function pt(deg, val) {
        const rad = (deg * Math.PI) / 180;
        const r = (val / 100) * maxR;
        return { x: cx + r * Math.cos(rad), y: cy - r * Math.sin(rad) };
      }
      
      // 1. The Radar Grid (Subtle background)
      let grid = `
        <circle cx="${cx}" cy="${cy}" r="${maxR*0.33}" fill="none" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="4,4" />
        <circle cx="${cx}" cy="${cy}" r="${maxR*0.66}" fill="none" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="4,4" />
        <circle cx="${cx}" cy="${cy}" r="${maxR}" fill="none" stroke="#e2e8f0" stroke-width="1" opacity="0.5" />
        <line x1="${cx}" y1="${cy-maxR}" x2="${cx}" y2="${cy+maxR}" stroke="#e2e8f0" stroke-width="1" />
        <line x1="${cx-maxR}" y1="${cy}" x2="${cx+maxR}" y2="${cy}" stroke="#e2e8f0" stroke-width="1" />
      `;

      // 2. The Sexy Shape (Polygon with gradient fill)
      const G = pt(90, g); const I = pt(0, i); const P = pt(270, p); const R = pt(180, r);
      const shape = `<polygon points="${G.x},${G.y} ${I.x},${I.y} ${P.x},${P.y} ${R.x},${R.y}" fill="url(#diamondGrad)" stroke="#0056b3" stroke-width="3" stroke-linejoin="round" style="filter: url(#subtleGlow);" />`;
      
      // 3. The Connecting Lines to Center (optional, adds structure)
      const connectors = [G,I,P,R].map(p => `<line x1="${cx}" y1="${cy}" x2="${p.x}" y2="${p.y}" stroke="#0056b3" stroke-width="1" opacity="0.3" />`).join("");

      svg.innerHTML = grid + connectors + shape;
    }

    // --- MAIN UPDATE LOOP ---
    function update() {
      const g = parseInt(document.getElementById("input-g").value);
      const r = parseInt(document.getElementById("input-r").value);
      const i = parseInt(document.getElementById("input-i").value);
      const p = parseInt(document.getElementById("input-p").value);

      // Update Values & Slider Tracks
      document.getElementById("val-g").textContent = g; updateSliderTrack("input-g", g);
      document.getElementById("val-r").textContent = r; updateSliderTrack("input-r", r);
      document.getElementById("val-i").textContent = i; updateSliderTrack("input-i", i);
      document.getElementById("val-p").textContent = p; updateSliderTrack("input-p", p);
      
      // Update Total Score
      document.getElementById("totalScore").textContent = Math.round((g+r+i+p)/4);

      // Update Health Check
      function setHealth(key, val) {
        const s = getStatus(val);
        document.getElementById("badge-"+key).className = "status-badge " + s.class;
        document.getElementById("badge-"+key).textContent = s.label;
        document.getElementById("score-"+key).textContent = val + "/100";
      }
      setHealth("g", g); setHealth("r", r); setHealth("i", i); setHealth("p", p);

      // Update Archetype & Summary
      const arch = getArchetype(g, r, i, p);
      const archBox = document.getElementById("archetypeBox");
      document.getElementById("archetypeTitle").textContent = arch.title;
      document.getElementById("archetypeBody").textContent = arch.body;
      document.getElementById("execSummary").textContent = arch.summary;
      
      // Apply color mode to archetype box
      archBox.className = "glass-card archetype-card " + arch.mode;

      // Draw Diamond
      drawDiamond(g, r, i, p);
    }

    // Event Listeners
    ["input-g", "input-r", "input-i", "input-p"].forEach(id => {
      document.getElementById(id).addEventListener("input", update);
    });

    update(); // Init on load
  })();
</script>

</body>
</html>

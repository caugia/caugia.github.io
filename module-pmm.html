<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Product Marketing Deep Dive | Caugia Consulting</title>

  <link rel="icon" type="image/png" sizes="32x32" href="assets/logo-final.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/logo-final.png">
  <link rel="apple-touch-icon" href="assets/logo-final.png">
  <link rel="icon" type="image/png" sizes="192x192" href="assets/logo-final.png">

  <link rel="stylesheet" href="assets/caugia-v10.1.css?v=10.1"/>

  <style>
    /* --- MODULE ASSESSMENT OVERRIDES --- */
    
    /* 1. Layout Lock */
    html, body { height: 100%; overflow: hidden; display: flex; flex-direction: column; margin:0; }
    .gi-main { flex-grow: 1; overflow: hidden; padding-bottom: 0; height: calc(100% - 60px); }
    .gi-shell { height: 100%; display: grid; grid-template-columns: 320px 1fr 280px; gap: 0; }
    
    /* 2. Left Sidebar */
    .gi-left-info {
        display: flex; flex-direction: column; 
        height: 100%; 
        overflow: hidden;
        padding-bottom: 4px;
    }

    /* 3. Description Box (fixed bottom) */
    .gi-pillar-desc-box {
        margin-top: auto;
        height: 240px; min-height: 240px; max-height: 240px;
        overflow: hidden; flex-shrink: 0;
        background: #fff; border: 1px solid #e2e8f0; border-radius: 12px;
        padding: 24px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
    }

    /* 4. Utility Buttons */
    .gi-utility-row {
      position: absolute; top: 20px; right: 20px;
      display: flex; gap: 8px; z-index: 10;
    }
    .gi-utility-btn {
      background: #fff; border: 1px solid #e2e8f0; border-radius: 6px;
      padding: 6px 12px; font-size: 0.75rem; font-weight: 600; color: #64748b;
      cursor: pointer; transition: all 0.2s ease;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .gi-utility-btn:hover { border-color: #0056b3; color: #0056b3; }

    /* 5. Engine Nav */
    .gi-pillar-nav li { 
        color: #475569; cursor: pointer; 
        transition: color 0.2s, background-color 0.2s;
    } 
    .gi-pillar-nav li:hover { color: #0056b3; background-color: #f1f5f9; }
    .gi-pillar-nav li.active {
      background-color: #0056b3 !important; color: #ffffff !important; font-weight: 700;
    }

    /* 6. Input Spacing */
    .gi-group-grid {
      display: grid; grid-template-columns: 1fr 1fr; gap: 24px;
      margin-top: 16px; margin-bottom: 24px;
    }
    .gi-group-grid label {
      display: block; font-weight: 700; font-size: 0.85rem; margin-bottom: 8px; color: #1e293b;
    }
    .gi-input, .gi-textarea {
      width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 8px;
      font-family: 'Inter', sans-serif; font-size: 0.95rem; background: #fff;
    }
    .gi-input:focus { border-color: #0056b3; box-shadow: 0 0 0 3px rgba(0,86,179,0.1); outline: none; }

    /* 7. Radio Cards */
    .gi-options-grid { display: flex; flex-direction: column; gap: 12px; margin-top: 16px; }
    .gi-option-card {
      display: flex; align-items: center; padding: 16px;
      border: 1px solid #e2e8f0; border-radius: 8px; cursor: pointer; background: #fff;
    }
    .gi-option-card:hover { border-color: #94a3b8; background: #f8fafc; }
    .gi-option-card input { margin-right: 12px; transform: scale(1.2); }

    /* 8. Question Card — NO SCROLLBAR */
    .gi-question-card {
      position: relative; 
      height: 100%; display: flex; flex-direction: column;
      padding: 40px; overflow: hidden;
    }
    .gi-question-body { flex-grow: 1; padding-bottom: 80px; overflow: hidden; } 
    
    /* 9. Bottom Nav Bar */
    .gi-nav-row {
      position: sticky; bottom: 0; left: 0; right: 0;
      background: white; border-top: 1px solid #e2e8f0;
      padding: 20px 40px; margin: 0 -40px -40px -40px; 
      display: flex; gap: 12px; align-items: center;
    }

    #gi-test-submit-btn {
      background: #dc2626; color: white; border: none; margin-left: auto;
    }

    /* Mobile */
    @media (max-width: 1000px) {
      body { overflow-y: auto; height: auto; }
      .gi-shell { display: flex; flex-direction: column; }
      .gi-left-info, .gi-right-pillars { display: none; }
      .gi-question-card { height: auto; overflow: visible; }
    }

    /* ═══ WORLD CLASS POLISH ═══ */
    .gi-question-header, .gi-question-body {
      animation: fadeIn 0.25s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .gi-option-card {
      transition: all 0.2s ease !important;
    }
    .gi-option-card:hover {
      border-color: #94a3b8 !important; background: #f8fafc !important;
      transform: translateY(-1px); box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    @keyframes subtlePulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(0,86,179,0.2); }
      50% { box-shadow: 0 0 0 6px rgba(0,86,179,0); }
    }
    #gi-next-btn:not(:disabled) {
      animation: subtlePulse 2s ease-in-out infinite;
    }
    .gi-pillar-nav li {
      display: flex !important; justify-content: space-between !important; align-items: center !important;
    }
    .pillar-progress { flex-shrink: 0; margin-left: 8px; }
    .gi-utility-btn { font-size: 0.72rem; padding: 5px 10px; white-space: nowrap; }
    .gi-faq-button {
      padding: 10px 16px !important; font-size: 0.8rem !important;
      bottom: 16px !important; right: 16px !important;
    }

    /* Module badge */
    .module-badge {
      display: inline-block; background: #eff6ff; color: #0056b3;
      font-size: 0.7rem; font-weight: 700; padding: 3px 8px;
      border-radius: 4px; margin-bottom: 8px; letter-spacing: 0.03em;
    }
  </style>
</head>

<body>

<header class="gi-header">
  <div class="gi-header-inner">
    <div class="gi-header-left">
      <img src="assets/logo-final.png" class="gi-logo" alt="Caugia logo" width="32" height="32">
      <span class="gi-header-brand">Caugia Consulting</span>
    </div>
    <div class="gi-header-right"></div>
  </div>
</header>

<main class="gi-main">
  <div class="gi-shell">

    <aside class="gi-left-info">
      <span class="module-badge">GRIP Deep Dive Module</span>
      <div class="gi-info-title">Product Marketing</div>
      <h1 class="gi-info-h1">PMM Deep Dive</h1>
      <p class="gi-info-desc">
        A 60-question diagnostic across 6 engines that reveals where your
        product marketing system creates value — and where it leaks.
      </p>
      <div class="gi-info-meta">6 engines · 60 questions · ~25 min</div>

      <div class="gi-progress-box">
        <div class="gi-progress-top">
          <span id="gi-progress-count">0 / 60</span>
          <span id="gi-progress-percent">0%</span>
        </div>
        <div class="gi-progress-track">
          <div id="gi-progress-bar" class="gi-progress-fill"></div>
        </div>
      </div>

      <button class="gi-btn gi-reset" id="gi-reset-btn" style="margin-bottom:16px;">Reset</button>

      <div class="gi-pillar-desc-box" id="gi-left-pillar-desc-box">
        <h3 id="gi-pillar-name">Market & Buyer Intelligence</h3>
        <p id="gi-pillar-desc">
          Do you understand WHO buys and WHY? This engine evaluates the depth of your buyer personas, ICP definition, win/loss analysis, and how research findings flow across the organization.
        </p>
      </div>
    </aside>

    <section class="gi-center">
      <div class="gi-question-card" id="gi-question-card">

        <div class="gi-utility-row">
          <button class="gi-utility-btn" id="gi-save-btn">Save Progress</button>
          <button class="gi-utility-btn" id="gi-jump-first">First Unanswered</button>
          <button class="gi-utility-btn" id="gi-jump-last">Last Answered</button>
        </div>

        <div class="gi-question-header">
          <div class="gi-question-kicker" id="gi-question-kicker">Engine 1: Market & Buyer Intelligence</div>
          <h2 class="gi-question-title" id="gi-question-title"></h2>
          <p class="gi-question-sub" id="gi-question-sub"></p>
        </div>

        <div class="gi-question-body" id="gi-question-body"></div>

        <div class="gi-nav-row">
          <button class="gi-btn" id="gi-prev-btn">Previous</button>
          <button class="gi-btn gi-primary" id="gi-next-btn">Next</button>
          <button class="gi-btn gi-primary" id="gi-submit-btn" style="display:none;">Submit Assessment</button>
          <button class="gi-btn" id="gi-clear-btn">Clear</button>
          <button class="gi-btn" id="gi-test-submit-btn">TEST SUBMIT</button>
        </div>

      </div>
    </section>

    <aside class="gi-right-pillars">
      <div class="gi-pillars-title">Engines</div>
      <ul class="gi-pillar-nav" id="gi-left-pillar-list">
        <li data-p="1" class="active">1 — Market & Buyer Intel</li>
        <li data-p="2">2 — Positioning & Messaging</li>
        <li data-p="3">3 — Competitive Intelligence</li>
        <li data-p="4">4 — Launch & GTM Execution</li>
        <li data-p="5">5 — Sales/Mkt Enablement</li>
        <li data-p="6">6 — Messaging Performance</li>
      </ul>
    </aside>

  </div>
</main>

<a href="faq.html" class="gi-faq-button">FAQ</a>

<script src="assets/PMM_QUESTIONS.js"></script>

<script>
const PILLAR_META = {
  1:{name:"Market & Buyer Intelligence", desc:"Do you understand WHO buys and WHY? This engine evaluates the depth of your buyer personas, ICP definition, win/loss analysis, and how research findings flow across the organization."},
  2:{name:"Positioning & Messaging", desc:"Can you articulate WHY choose you? This engine assesses your positioning framework, messaging hierarchy, customer language adoption, and cross-team consistency."},
  3:{name:"Competitive Intelligence", desc:"Can you WIN against alternatives? This engine evaluates competitive strategy, battlecard quality, intel gathering systems, and how confident Sales feels in competitive situations."},
  4:{name:"Launch & GTM Execution", desc:"Do launches create IMPACT? This engine assesses your launch framework, cross-functional coordination, post-launch reviews, and whether launches drive measurable pipeline."},
  5:{name:"Sales/Marketing Enablement", desc:"Does Sales have the right MATERIALS? This engine evaluates content strategy, case study coverage, ROI tools, content utilization, and whether PMM content measurably influences deals."},
  6:{name:"Messaging Performance", desc:"Do you MEASURE and IMPROVE? This engine assesses testing processes, KPIs, A/B infrastructure, feedback loops, and the speed from messaging change to pipeline impact."}
};
</script>

<script src="assets/PMM-engine.js"></script>

<!-- ═══ WORLD CLASS UPGRADES ═══ -->
<script>
document.addEventListener("DOMContentLoaded", function() {

  // ── 1. JUMP BUTTONS ──
  var jumpFirstBtn = document.getElementById("gi-jump-first");
  var jumpLastBtn = document.getElementById("gi-jump-last");
  var STORAGE_KEY = "caugia_pmm_v1_state";

  if (jumpFirstBtn && window.QUESTIONS) {
    jumpFirstBtn.addEventListener("click", function() {
      var state = null;
      try { state = JSON.parse(localStorage.getItem(STORAGE_KEY)); } catch(e) {}
      if (!state || !state.answers) return;

      for (var i = 0; i < window.QUESTIONS.length; i++) {
        var q = window.QUESTIONS[i];
        var k = "q" + q.id;
        var answered = state.answers[k] && String(state.answers[k]).trim().length > 0;
        if (!answered) {
          state.currentStep = i;
          localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
          location.reload();
          return;
        }
      }
      alert("All questions are answered.");
    });
  }

  if (jumpLastBtn && window.QUESTIONS) {
    jumpLastBtn.addEventListener("click", function() {
      var state = null;
      try { state = JSON.parse(localStorage.getItem(STORAGE_KEY)); } catch(e) {}
      if (!state || !state.answers) return;

      var lastAnswered = -1;
      for (var i = 0; i < window.QUESTIONS.length; i++) {
        var q = window.QUESTIONS[i];
        var k = "q" + q.id;
        if (state.answers[k] && String(state.answers[k]).trim().length > 0) lastAnswered = i;
      }

      if (lastAnswered >= 0) {
        state.currentStep = lastAnswered;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        location.reload();
      } else {
        alert("No answers recorded yet.");
      }
    });
  }

  // ── 2. VISUAL FEEDBACK ──
  var body = document.getElementById("gi-question-body");
  if (body) {
    var observer = new MutationObserver(function() {
      var cards = body.querySelectorAll(".gi-option-card");
      cards.forEach(function(card) {
        var radio = card.querySelector("input[type='radio']");
        if (!radio) return;
        card.style.transition = "all 0.2s ease";
        if (radio.checked) {
          card.style.borderColor = "#0056b3";
          card.style.backgroundColor = "#eff6ff";
          card.style.boxShadow = "0 0 0 2px rgba(0,86,179,0.15)";
        }
      });
    });
    observer.observe(body, { childList: true, subtree: true });
  }

  // ── 3. ENGINE PROGRESS ──
  function updatePillarProgress() {
    var state = null;
    try { state = JSON.parse(localStorage.getItem(STORAGE_KEY)); } catch(e) {}
    if (!state || !state.answers || !window.QUESTIONS) return;

    var pillarTotal = {};
    var pillarAnswered = {};

    window.QUESTIONS.forEach(function(q) {
      var p = q.pillar;
      if (!pillarTotal[p]) { pillarTotal[p] = 0; pillarAnswered[p] = 0; }
      pillarTotal[p]++;
      var k = "q" + q.id;
      if (state.answers[k] && String(state.answers[k]).trim().length > 0) pillarAnswered[p]++;
    });

    var items = document.querySelectorAll(".gi-pillar-nav li");
    items.forEach(function(li) {
      var p = parseInt(li.getAttribute("data-p"));
      var total = pillarTotal[p] || 0;
      var done = pillarAnswered[p] || 0;

      var existing = li.querySelector(".pillar-progress");
      if (existing) existing.remove();

      if (total > 0) {
        var indicator = document.createElement("span");
        indicator.className = "pillar-progress";
        indicator.style.cssText = "float:right; font-size:0.7rem; font-weight:600; opacity:0.7;";
        if (done === total) {
          indicator.textContent = "✓";
          indicator.style.color = "#16a34a";
          indicator.style.opacity = "1";
        } else if (done > 0) {
          indicator.textContent = done + "/" + total;
        }
        li.appendChild(indicator);
      }
    });
  }
  updatePillarProgress();
  setInterval(updatePillarProgress, 2000);

  // ── 4. PILLAR INFO ──
  var list = document.getElementById("gi-left-pillar-list");
  var titleBox = document.getElementById("gi-pillar-name");
  var descBox = document.getElementById("gi-pillar-desc");

  if(list && titleBox && descBox) {
    list.addEventListener("click", function(e) {
      var li = e.target.closest("li");
      if(!li) return;
      var pIndex = li.getAttribute("data-p");
      var info = PILLAR_META[pIndex];
      if(info) {
        titleBox.innerText = info.name;
        descBox.style.opacity = "0";
        descBox.style.transition = "opacity 0.15s ease";
        setTimeout(function() {
          descBox.innerText = info.desc;
          descBox.style.opacity = "1";
        }, 150);
      }
    });
  }

  // ── 5. KEYBOARD NAV ──
  document.addEventListener("keydown", function(e) {
    if (e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA" || e.target.tagName === "SELECT") return;
    if (e.key === "ArrowRight" || e.key === "Enter") {
      var nextBtn = document.getElementById("gi-next-btn");
      if (nextBtn && nextBtn.style.display !== "none") nextBtn.click();
    }
    if (e.key === "ArrowLeft") {
      var prevBtn = document.getElementById("gi-prev-btn");
      if (prevBtn && prevBtn.style.display !== "none") prevBtn.click();
    }
  });
});
</script>

</body>
</html>

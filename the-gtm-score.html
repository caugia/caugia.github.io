<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Your GTM Score Analysis | Caugia Consulting</title>
  <meta name="description" content="Your detailed GTM Score analysis. Understand your revenue architecture maturity and identify the primary constraints in your growth engine." />
  <meta name="keywords" content="GTM Score, Revenue Architecture, SaaS Audit, GTM Maturity, Caugia" />
  <link rel="canonical" href="https://www.caugia.com/the-gtm-score.html" />

  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://www.caugia.com/the-gtm-score.html" />
  <meta property="og:title" content="My GTM Score Analysis | Caugia Consulting" />
  <meta property="og:description" content="I just analyzed my revenue architecture with the Caugia Intelligence Engine. See the breakdown." />
  <meta property="og:image" content="https://www.caugia.com/assets/social-share.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="icon" type="image/png" sizes="32x32" href="assets/logo-final.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/logo-final.png">
  <link rel="apple-touch-icon" href="assets/logo-final.png">
  <link rel="icon" type="image/png" sizes="192x192" href="assets/logo-final.png">

  <!-- ðŸ”’ SECURITY: Protect this entire page -->
  <script src="/auth.js"></script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Caugia GTM Score Calculator",
    "url": "https://www.caugia.com/the-gtm-score.html",
    "description": "An algorithmic tool that assesses B2B SaaS GTM maturity across 12 pillars.",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "All",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "EUR"
    }
  }
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Merriweather:wght@400;700;900&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="assets/caugia-base.css">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* --- PAGE SPECIFIC STYLES (Result Page Only) --- */

    :root {
      /* Status Colors (Same as Index logic) */
      --good-bg: #f0fdf4; --good-border: #bbf7d0; --good-text: #15803d;
      --warn-bg: #fffbeb; --warn-border: #fde68a; --warn-text: #b45309;
      --bad-bg: #fef2f2;  --bad-border: #fecaca;  --bad-text: #b91c1c;
      --mid-bg: #f0f9ff;  --mid-border: #bae6fd;  --mid-text: #0369a1;
    }

    /* Hero Area */
    .result-hero { padding: 60px 0 40px; text-align: center; max-width: 800px; margin: 0 auto; }
    .result-hero h1 { font-size: 3rem; margin-bottom: 20px; line-height: 1.1; }
    .result-hero p { font-size: 1.2rem; color: var(--text-body); }

    /* The Score Card */
    .score-card {
      background: var(--white);
      border: 1px solid var(--line);
      border-radius: var(--radius-lg);
      padding: 48px;
      text-align: center;
      box-shadow: var(--shadow-lg);
      max-width: 600px;
      margin: 0 auto 60px;
      border-top: 6px solid var(--primary);
    }
    .score-number { font-size: 6rem; font-weight: 900; color: var(--primary); line-height: 1; margin-bottom: 12px; font-variant-numeric: tabular-nums; }
    .score-band {
      display: inline-block; padding: 8px 24px; border-radius: 50px;
      background: #e0f2fe; color: #004494; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em; font-size: 0.9rem;
      margin-bottom: 20px;
    }
    .score-desc { font-size: 1.1rem; color: var(--text-body); }

    /* Status Notification */
    .status-card {
      background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px;
      padding: 24px; max-width: 600px; margin: 0 auto 60px; text-align: center;
    }
    .status-card h3 { color: #15803d; font-size: 1.1rem; margin-bottom: 8px; font-family: Inter, sans-serif; }
    .status-card p { color: #166534; margin-bottom: 0; font-size: 0.95rem; }

    /* GRIP Layout (2 Columns) */
    .result-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 80px; align-items: stretch; }

    .result-content-card {
      background: var(--white); border: 1px solid var(--line); border-radius: var(--radius-md);
      padding: 40px; box-shadow: var(--shadow-sm);
      display: flex; flex-direction: column; /* Ensure vertical filling */
    }
    .result-content-card h2 { font-size: 1.5rem; margin-bottom: 24px; font-family: Inter, sans-serif; font-weight: 800; }

    /* Health Bars (GRIP) */
    .health-row { display: flex; align-items: center; margin-bottom: 20px; }
    .health-name { width: 130px; font-weight: 700; color: var(--text-dark); font-size: 0.95rem; }
    .health-bar-track { flex-grow: 1; height: 10px; background: #e2e8f0; border-radius: 10px; overflow: hidden; margin: 0 20px; }

    /* Dynamic Fill Classes */
    .health-bar-fill { display: block; height: 100%; border-radius: 10px; width: 0; transition: width 1s ease; }
    .fill-green { background: #16a34a; }
    .fill-yellow { background: #d97706; }
    .fill-red { background: #dc2626; }

    .health-value { width: 30px; font-weight: 800; color: var(--text-dark); text-align: right; }

    /* --- DYNAMIC INSIGHT BOX (From Index) --- */
    .insight-box {
      border: 1px solid transparent;
      border-radius: 12px;
      padding: 16px;
      margin-top: auto; /* Push to bottom of card if needed */
      transition: all 0.3s ease;
    }

    .insight-box.mode-good { background: var(--good-bg); border-color: var(--good-border); }
    .insight-box.mode-warn { background: var(--warn-bg); border-color: var(--warn-border); }
    .insight-box.mode-bad  { background: var(--bad-bg); border-color: var(--bad-border); }
    .insight-box.mode-mid  { background: var(--mid-bg); border-color: var(--mid-border); }

    .insight-label {
      font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; display: block; margin-bottom: 4px;
    }
    .mode-good .insight-label { color: var(--good-text); }
    .mode-warn .insight-label { color: var(--warn-text); }
    .mode-bad .insight-label  { color: var(--bad-text); }
    .mode-mid .insight-label  { color: var(--mid-text); }

    .insight-title {
      font-weight: 800; font-size: 0.95rem; margin-bottom: 4px; font-family: Inter, sans-serif;
    }
    .mode-good .insight-title { color: #14532d; }
    .mode-warn .insight-title { color: #78350f; }
    .mode-bad .insight-title  { color: #7f1d1d; }
    .mode-mid .insight-title  { color: #0c4a6e; }

    .insight-text {
      font-size: 0.85rem; color: #334155; line-height: 1.5;
      min-height: 3.2em; /* Prevent layout shift */
    }

    /* Diamond Wrapper */
    .diamond-container {
      flex-grow: 1; display: flex; align-items: center; justify-content: center;
      margin-top: 20px;
    }
    .diamond-wrapper { position: relative; width: 100%; aspect-ratio: 1/1; max-width: 320px; margin: 0 auto; }
    #gripDiamondSVG { width: 100%; height: 100%; overflow: visible; }

    /* UPDATED LABELS: Single Letters, Circular Badges */
    .diamond-label {
      position: absolute;
      width: 36px; height: 36px; /* Circle Size */
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 50%;
      color: var(--primary);
      font-family: Merriweather, serif; /* Serif for executive feel */
      font-weight: 900;
      font-size: 1rem;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      z-index: 10;
    }

    /* Positioning Adjustments to align perfectly with diamond tips */
    .diamond-label.top { top: 0; left: 50%; transform: translate(-50%, -50%); }
    .diamond-label.bottom { bottom: 0; left: 50%; transform: translate(-50%, 50%); }
    .diamond-label.left { top: 50%; left: 0; transform: translate(-50%, -50%); }
    .diamond-label.right { top: 50%; right: 0; transform: translate(50%, -50%); }

    /* --- FOCUS AREAS --- */
    .focus-intro { text-align: center; margin-bottom: 40px; }
    .focus-intro p { max-width: 700px; margin: 0 auto; color: #64748b; }

    .focus-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }

    .focus-card {
        background: #fff; border: 1px solid var(--line); border-radius: 16px; padding: 32px;
        box-shadow: var(--shadow-sm); transition: transform 0.2s; display: flex; flex-direction: column;
    }
    .focus-card:hover { transform: translateY(-3px); }

    .focus-tag {
        display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 0.7rem; font-weight: 700;
        text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 16px; width: fit-content;
    }
    .tag-critical { background: #fef2f2; color: #dc2626; border: 1px solid #fca5a5; }
    .tag-friction { background: #fffbeb; color: #d97706; border: 1px solid #fcd34d; }

    .focus-title { font-family: Inter, sans-serif; font-size: 1.1rem; font-weight: 800; color: var(--text-dark); margin-bottom: 12px; }
    .focus-desc { font-size: 0.95rem; color: var(--text-body); line-height: 1.5; }

    /* Footer / Dark Section */
    .section-dark { background: #0f172a; color: var(--white); padding: 80px 0; margin-top: 80px; }
    .section-dark h2 { color: var(--white); text-align: center; margin-bottom: 24px; }

    .next-steps-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 40px; max-width: 900px; margin: 40px auto 0; }
    .next-step-item h3 { font-family: Inter, sans-serif; font-size: 1.2rem; color: var(--white); margin-bottom: 12px; display: flex; gap: 12px; align-items: center; }
    .next-step-item h3::before { content: "â†’"; color: #60a5fa; }
    .next-step-item p { color: #94a3b8; font-size: 1rem; }

    /* MOBILE RESPONSIVE FIXES */
    @media (max-width: 900px) {
      .result-grid, .focus-grid, .next-steps-grid { grid-template-columns: 1fr; }
      .score-number { font-size: 4rem; }
    }
  </style>
</head>

<body>

<header>
  <div class="container nav">
    <a class="brand" href="index.html">
      <img src="assets/logo-final.png" alt="Caugia" width="32" height="32" />
      <span>CAUGIA CONSULTING</span>
    </a>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="services.html">Services</a></li>
      <li><a href="gtm-assessment.html" class="active">GTM Score</a></li>
      <li><a href="resources.html">Resources</a></li>
    </ul>

    <div class="nav-actions">
      <a href="contact.html" class="btn btn-secondary">Contact</a>
      <button class="menu-toggle" id="menuToggle">Menu</button>
    </div>
  </div>

  <div class="container mobile-nav" id="mobileNav">
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="services.html">Services</a>
    <a href="gtm-assessment.html" class="active">GTM Score</a>
    <a href="resources.html">Resources</a>
    <a href="contact.html">Contact</a>
  </div>
</header>

<main>

  <section class="result-hero">
    <div class="container">
      <h1>Your GTM Score</h1>
      <p>
        This score gives a first view of how mature, aligned and scalable your go-to-market system is.
        It is not a full audit but a structured foundation for deeper analysis.
      </p>
    </div>
  </section>

  <div class="container">
    <div class="score-card">
      <div id="gtm-score" class="score-number">â€“</div>
      <div id="gtm-band" class="score-band">Calculating...</div>
      <p id="gtm-band-description" class="score-desc">Your maturity band will appear here momentarily.</p>
    </div>

    <div class="status-card">
      <h3>Your full report is being generated</h3>
      <p>Please check your inbox in 2-3 minutes for the complete PDF analysis.</p>
    </div>

    <div class="result-grid">
      <div class="result-content-card">
        <h2>The GRIP View</h2>
        <p>How the four forces of your engine balance out.</p>

        <div style="margin-top: 30px; margin-bottom: 30px;">
          <div class="health-row">
            <div class="health-name">Guidance</div>
            <div class="health-bar-track"><span class="health-bar-fill" id="gripGuidanceBar" style="width:0%"></span></div>
            <div class="health-value" id="gripGuidanceValue">-</div>
          </div>
          <div class="health-row">
            <div class="health-name">Resources</div>
            <div class="health-bar-track"><span class="health-bar-fill" id="gripResourcesBar" style="width:0%"></span></div>
            <div class="health-value" id="gripResourcesValue">-</div>
          </div>
          <div class="health-row">
            <div class="health-name">Implementation</div>
            <div class="health-bar-track"><span class="health-bar-fill" id="gripImplementationBar" style="width:0%"></span></div>
            <div class="health-value" id="gripImplementationValue">-</div>
          </div>
          <div class="health-row">
            <div class="health-name">Performance</div>
            <div class="health-bar-track"><span class="health-bar-fill" id="gripPerformanceBar" style="width:0%"></span></div>
            <div class="health-value" id="gripPerformanceValue">-</div>
          </div>
        </div>

        <div class="insight-box" id="gripArchetypeBox">
          <span class="insight-label">System Pattern</span>
          <div class="insight-title" id="gripArchetypeTitle">Analyzing...</div>
          <div class="insight-text" id="gripArchetypeDesc">Please wait while we determine your system pattern.</div>
        </div>
      </div>

      <div class="result-content-card">
        <h2>The System Shape</h2>
        <p>Visualizing the tension between forces.</p>

        <div class="diamond-container">
          <div class="diamond-wrapper">
            <svg id="gripDiamondSVG" viewBox="0 0 260 260"></svg>
            <div class="diamond-label top">G</div>
            <div class="diamond-label right">I</div>
            <div class="diamond-label bottom">P</div>
            <div class="diamond-label left">R</div>
          </div>
        </div>
      </div>
    </div>

    <div class="result-content-card">
      <div class="focus-intro">
        <h2>Priority Focus Areas</h2>
        <p>
          Based on your answers, these three capabilities are creating the most friction in your revenue engine. Fixing these will have an outsized impact on performance.
        </p>
      </div>

      <div class="focus-grid" id="focusGrid">
         <div class="focus-card">Loading priorities...</div>
      </div>
    </div>

  </div>

  <section class="section-dark">
    <div class="container">
      <h2>What happens next</h2>
      <div class="next-steps-grid">
        <div class="next-step-item">
          <h3>Your report is generated</h3>
          <p>A personalised analysis is being prepared based on your inputs.</p>
        </div>
        <div class="next-step-item">
          <h3>Check your email</h3>
          <p>You will receive the report including your maturity band, patterns, strengths, and risks.</p>
        </div>
        <div class="next-step-item">
          <h3>Align your team</h3>
          <p>Use the report as a structured starting point before deeper GTM work.</p>
        </div>
        <div class="next-step-item">
          <h3>Go Deeper</h3>
          <p>Explore the full Intelligence Report for a deeper twelve-pillar assessment.</p>
        </div>
      </div>

      <div style="text-align:center; margin-top: 60px;">
        <a href="services.html" class="btn btn-primary" style="background:var(--white); color:var(--text-dark); margin-right: 12px;">Explore Intelligence Report</a>
        <a href="mailto:contact@caugia.com" class="btn-outline">Ask a question</a>
      </div>
    </div>
  </section>

</main>

<footer>
  <div class="container">
    <p>Â© <span id="year">2026</span> Caugia Consulting. All rights reserved.</p>
  </div>
</footer>

<script src="assets/caugia-base.js"></script>

<script>
  // 1. Get Score from URL
  function getScoreFromURL() {
    const params = new URLSearchParams(window.location.search);
    return parseInt(params.get("score"), 10);
  }

  const score = getScoreFromURL();
  const scoreEl = document.getElementById("gtm-score");
  const bandEl = document.getElementById("gtm-band");
  const descEl = document.getElementById("gtm-band-description");

  // 2. Populate Main Score
  if (!isNaN(score)) {
    scoreEl.textContent = score;
    let band = "";
    let desc = "";

    if (score < 30) {
      band = "At Risk"; desc = "Your GTM system has multiple constraints that require attention.";
    } else if (score < 50) {
      band = "Emerging"; desc = "Your GTM foundations are forming but lack consistency and alignment.";
    } else if (score < 70) {
      band = "Developing"; desc = "Your system shows progress with several capabilities performing well.";
    } else if (score < 85) {
      band = "Strong"; desc = "Your GTM system is running with clarity and discipline.";
    } else {
      band = "Best in Class"; desc = "You have a highly aligned and scalable GTM engine.";
    }

    bandEl.textContent = band;
    descEl.textContent = desc;
  }

  // 3. Pillar Logic
  function getPillarsFromURL() {
    const params = new URLSearchParams(window.location.search);
    const raw = params.get("pillars");
    if (!raw) return null;
    return raw.split(",").map(n => parseInt(n, 10));
  }

  const pillarScores = getPillarsFromURL();

  // Define unique insights per pillar (UPDATED PILLAR NAMES)
  const PILLAR_INSIGHTS = {
    "GTM Strategy & Leadership": "Direction is unclear or inconsistently applied. Priorities drift and execution fragments.",
    "Market Intelligence": "Decisions rely on internal opinion rather than real market and deal-level signals.",
    "Product Marketing": "Positioning is not landing fast enough. Buyers struggle to connect value to urgency.",
    "Demand Generation": "Pipeline creation is not systemic. Performance relies on spikes, heroics, or narrow channels.",
    "Sales Execution": "Win rates and deal control are inconsistent. The motion is not repeatable under pressure.",
    "Customer Success & Expansion": "Retention and expansion are not predictable. Growth is expensive because leakage persists.",
    "Revenue Operations & Systems": "Process and instrumentation gaps create friction. Handoffs break and visibility degrades.",
    "Pricing & Packaging": "You are not capturing value consistently. Packaging or discounting behavior is weakening outcomes.",
    "Product Readiness": "The offer is not enterprise-ready or adoption-ready. Friction appears in evaluation, onboarding, or rollout.",
    "Data & Insights": "The system is not measurable end-to-end. Forecasting and decision making remain narrative-driven.",
    "Enablement": "Execution capacity is capped by onboarding, playbooks, or manager coaching bandwidth.",
    "Alignment & Governance": "Operating cadence and decision authority are unclear. Cross-functional execution drifts over time."
  };

  if (pillarScores) {
    // Index mapping: pillarScores[0] = Pillar 1 ... pillarScores[11] = Pillar 12

    // GRIP mapping (UPDATED: 3 pillars per letter)
    // G: 1,2,3
    // R: 8,9,11
    // I: 4,5,7
    // P: 6,10,12
    const valMap = {
      p1: pillarScores[0],
      p2: pillarScores[1],
      p3: pillarScores[2],
      p4: pillarScores[3],
      p5: pillarScores[4],
      p6: pillarScores[5],
      p7: pillarScores[6],
      p8: pillarScores[7],
      p9: pillarScores[8],
      p10: pillarScores[9],
      p11: pillarScores[10],
      p12: pillarScores[11]
    };

    const gVal = Math.round((valMap.p1 + valMap.p2 + valMap.p3) / 3);
    const rVal = Math.round((valMap.p8 + valMap.p9 + valMap.p11) / 3);
    const iVal = Math.round((valMap.p4 + valMap.p5 + valMap.p7) / 3);
    const pVal = Math.round((valMap.p6 + valMap.p10 + valMap.p12) / 3);

    // Update Bars
    const colorClass = (val) => val >= 80 ? "fill-green" : (val >= 50 ? "fill-yellow" : "fill-red");
    const updateGripBar = (type, val) => {
      const bar = document.getElementById("grip" + type + "Bar");
      const txt = document.getElementById("grip" + type + "Value");
      bar.style.width = val + "%";
      bar.className = "health-bar-fill " + colorClass(val);
      txt.innerText = val;
    };

    updateGripBar("Guidance", gVal);
    updateGripBar("Resources", rVal);
    updateGripBar("Implementation", iVal);
    updateGripBar("Performance", pVal);

    // --- ARCHETYPE LOGIC ---
    function getArchetype(g, r, i, p) {
      const scores = [{ k: 'g', v: g }, { k: 'r', v: r }, { k: 'i', v: i }, { k: 'p', v: p }];
      scores.sort((a, b) => a.v - b.v);
      const avg = (g+r+i+p)/4;
      const lowest = scores[0];
      const highest = scores[3];
      const secondLowest = scores[1];

      // 1. SYSTEMIC STATES (Extremes)
      if (avg < 35) return { title: "The Stalled Engine", body: "Systemic failure across all dimensions. Foundational rebuild required immediately.", mode: "mode-bad" };
      if (avg < 45 && highest.v < 60) return { title: "The Fragile Foundation", body: "No dimension is strong enough to carry the others. Risk of total revenue deceleration.", mode: "mode-bad" };
      if (avg > 85) return { title: "The Precision Machine", body: "Elite performance. Focus on incremental optimization and expansion.", mode: "mode-good" };
      if (avg > 75 && lowest.v > 65) return { title: "The Balanced Engine", body: "Strong coherence. No major drag factors, allowing for predictable scaling.", mode: "mode-good" };

      // 2. CONSTRAINT LOGIC
      if (lowest.k === 'g') {
         if (highest.k === 'i' && highest.v > 65) return { title: "The Activity Trap", body: "High execution volume (I), but direction is unclear. The team is running fast in the wrong direction.", mode: "mode-warn" };
         if (highest.k === 'r' && highest.v > 65) return { title: "The Bloated Ship", body: "Heavy on resources (R), light on strategy. High burn rate with low strategic clarity.", mode: "mode-warn" };
         if (secondLowest.k === 'p') return { title: "The Guesswork Strategy", body: "No clear direction (G) and no data (P) to prove it. Decisions are purely anecdotal.", mode: "mode-bad" };
         return { title: "The Direction Gap", body: "Execution capability exists, but the strategic compass is broken. Teams are misaligned.", mode: "mode-warn" };
      }
      if (lowest.k === 'r') {
         if (highest.k === 'g' && highest.v > 70) return { title: "The Visionary Void", body: "Great strategy (G), but no resources (R) to back it up. A roadmap to nowhere.", mode: "mode-warn" };
         if (highest.k === 'i' && highest.v > 70) return { title: "The Burnout Engine", body: "High execution (I) on low resources (R). The team is over-performing but fragile.", mode: "mode-bad" };
         if (secondLowest.k === 'p') return { title: "The Tooling Debt", body: "Lack of resources (R) is causing a data blackout (P). You cannot fix what you cannot measure.", mode: "mode-bad" };
         return { title: "The Capacity Crunch", body: "Ambition exceeds bandwidth. The engine is undersized for the goals set.", mode: "mode-warn" };
      }
      if (lowest.k === 'i') {
         if (highest.k === 'g' && highest.v > 70) return { title: "The Ivory Tower", body: "Strategy is perfect (G), but reality breaks down. A disconnect between leadership and the front line.", mode: "mode-bad" };
         if (highest.k === 'p' && highest.v > 60) return { title: "The Heroic System", body: "Results (P) happen despite process (I), not because of it. Revenue relies on individual heroes.", mode: "mode-warn" };
         if (secondLowest.k === 'r') return { title: "The Process Void", body: "No process (I) and limited resources (R). Efficiency is impossible; friction is high.", mode: "mode-bad" };
         return { title: "The Broken Handoff", body: "Friction in the motion. Leads, data, or deals are dropping between silos.", mode: "mode-warn" };
      }
      if (lowest.k === 'p') {
         if (highest.k === 'i' && highest.v > 70) return { title: "The Leaky Bucket", body: "High effort (I), low outcome (P). Conversion rates or retention are draining value.", mode: "mode-bad" };
         if (highest.k === 'g' && highest.v > 70) return { title: "The Blind Optimist", body: "Strong narrative (G), but the numbers (P) don't validate the story.", mode: "mode-warn" };
         if (highest.k === 'r' && highest.v > 70) return { title: "The ROI Drag", body: "Heavy investment (R) yielding low returns (P). The engine is inefficient.", mode: "mode-bad" };
         return { title: "The Black Box", body: "The system runs, but visibility is zero. You cannot predict next quarter.", mode: "mode-mid" };
      }
      return { title: "The Developing Engine", body: "System shows potential but lacks coherence across pillars.", mode: "mode-mid" };
    }

    const arch = getArchetype(gVal, rVal, iVal, pVal);
    const boxEl = document.getElementById("gripArchetypeBox");
    document.getElementById("gripArchetypeTitle").innerText = arch.title;
    document.getElementById("gripArchetypeDesc").innerText = arch.body + " Most GTM teams are not constrained by effort. They are constrained by misalignment. Strategy, execution, and measurement drift.";

    boxEl.classList.remove("mode-good", "mode-warn", "mode-bad", "mode-mid");
    boxEl.classList.add(arch.mode);

    // --- DIAMOND RASTER (SVG) ---
    drawGripDiamond(gVal, rVal, iVal, pVal);

    // GENERATE PRIORITY CARDS (UPDATED PILLAR NAMES, ORDER 1..12)
    const pillarNames = [
      "GTM Strategy & Leadership",
      "Market Intelligence",
      "Product Marketing",
      "Demand Generation",
      "Sales Execution",
      "Customer Success & Expansion",
      "Revenue Operations & Systems",
      "Pricing & Packaging",
      "Product Readiness",
      "Data & Insights",
      "Enablement",
      "Alignment & Governance"
    ];

    let pillars = pillarScores.map((score, index) => ({ score, name: pillarNames[index] }));
    pillars.sort((a, b) => a.score - b.score);

    const lowestThree = pillars.slice(0, 3);
    const focusGrid = document.getElementById("focusGrid");

    focusGrid.innerHTML = lowestThree.map(p => {
      let tagClass = p.score < 50 ? "tag-critical" : "tag-friction";
      let tagName = p.score < 50 ? "Critical Constraint" : "Friction Point";
      let insight = PILLAR_INSIGHTS[p.name] || "This area requires attention to unlock growth.";

      return `
        <div class="focus-card">
          <span class="focus-tag ${tagClass}">${tagName}</span>
          <div class="focus-title">${p.name}</div>
          <div class="focus-desc">${insight}</div>
        </div>
      `;
    }).join("");
  }

  // 4. Diamond Engine (SVG)
  function drawGripDiamond(g, r, i, p) {
    const svg = document.getElementById("gripDiamondSVG");
    if (!svg) return;
    const center = 130;

    function point(angle, value) {
      const rad = (Math.PI / 180) * angle;
      return { x: center + Math.cos(rad) * value, y: center + Math.sin(rad) * value };
    }

    const G = point(-90, g);
    const I = point(0, i);
    const P = point(90, p);
    const R = point(180, r);

    let grid = "";
    [30, 60, 90].forEach(val => {
      const p1 = point(-90, val); const p2 = point(0, val);
      const p3 = point(90, val); const p4 = point(180, val);
      grid += `<polygon points="${p1.x},${p1.y} ${p2.x},${p2.y} ${p3.x},${p3.y} ${p4.x},${p4.y}" fill="none" stroke="#e2e8f0" stroke-width="1.5" />`;
    });

    const shape = `<polygon points="${G.x},${G.y} ${I.x},${I.y} ${P.x},${P.y} ${R.x},${R.y}" fill="rgba(0, 86, 179, 0.15)" stroke="#0056b3" stroke-width="2.5" />`;

    const dots = [G, I, P, R].map(pt =>
      `<circle cx="${pt.x}" cy="${pt.y}" r="4" fill="#0056b3" stroke="#fff" stroke-width="2" />`
    ).join("");

    svg.innerHTML = grid + shape + dots;
  }
</script>

</body>
</html>
